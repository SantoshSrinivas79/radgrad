<template name="Student_Explorer_Courses_Widget">
  {{#if Template.subscriptionsReady}}
    <div class="ui segments">
      <div class="ui padded segment container">

        <div class="ui clearing basic segment" style="margin: 0; padding-left: 0; padding-right: 0; padding-top: 0; padding-bottom: 0;">
          <h4 class="ui left floated header">{{toUpper shortName}} ({{name}})</h4>
          {{#if userStatus item}}
            {{#if futureInstance item}}
              {{> Student_Explorer_Courses_Widget_Button buttonType='remove' course=item}}
            {{else}}
              {{#if passedCourse item}}
                {{> Student_Explorer_Courses_Widget_Button buttonType='taken'}}
              {{else}}
                {{> Student_Explorer_Courses_Widget_Button buttonType='add' course=item}}
              {{/if}}
            {{/if}}
          {{else}}
            {{> Student_Explorer_Courses_Widget_Button buttonType='add' course=item}}
          {{/if}}
        </div>
        <div class="ui divider" style="margin-top: 0;"></div>

        <div class="ui stackable two column grid">
          <div class="column">
            {{#each descriptionPair in descriptionPairs}}

              {{#if isLabel descriptionPair.label 'Course Number'}}
                <b>{{descriptionPair.label}}:</b>
                {{#if descriptionPair.value}} {{descriptionPair.value}} <br>
                  {{else}}
                    N/A <br>
                {{/if}}
              {{/if}}

              {{#if isLabel descriptionPair.label 'Description'}}
              <b>{{descriptionPair.label}}:</b>
                {{#if descriptionPair.value}} {{descriptionPair.value}} <br>
                  {{else}}
                    N/A <br>
                {{/if}}
              {{/if}}

              {{#if isLabel descriptionPair.label 'Credit Hours'}}
              <b>{{descriptionPair.label}}:</b>
                {{#if descriptionPair.value}} {{descriptionPair.value}} <br>
                  {{else}}
                    N/A <br>
                {{/if}}
              {{/if}}

            {{/each}}
          </div>

          <div class="column">
            {{#each descriptionPair in descriptionPairs}}

              {{#if isLabel descriptionPair.label 'Syllabus'}}
              <b>{{descriptionPair.label}}:</b>
                {{#if descriptionPair.value}} <span style="word-wrap: break-word;">{{{descriptionPair.value}}}</span> <br>
                  {{else}}
                    N/A <br>
                {{/if}}
              {{/if}}

              {{#if isLabel descriptionPair.label 'More Information'}}
              <b>{{descriptionPair.label}}:</b>
                {{#if descriptionPair.value}} <span style="word-wrap: break-word;">{{{descriptionPair.value}}}</span> <br>
                  {{else}}
                    N/A <br>
                {{/if}}
              {{/if}}

            {{/each}}
          </div>
        </div>
      </div>

      {{#each descriptionPair in descriptionPairs}}
        {{#if isLabel descriptionPair.label 'Prerequisites'}}
          <div class="ui horizontal segments" style="background-color: white;">
            {{#each table in descriptionPair.value}}
              <div class="ui center aligned segment">
                {{{getTableTitle @index}}}
                  {{#each prerequisite in table}}
                    <a class="{{isActiveRoute coursesRouteName}} item" href="{{pathFor coursesRouteName username=routeUserName course = prerequisite.course}}">{{courseNameFromSlug prerequisite.course}} </a> <br>
                  {{/each}}
              </div>
            {{/each}}
          </div>
        {{/if}}
      {{/each}}

      {{#each descriptionPair in descriptionPairs}}
        {{#if isLabel descriptionPair.label 'Interests'}}
          <div class="ui right aligned secondary segment">
            {{#each interest in descriptionPair.value}}
              <a class="ui mini label" href="{{pathFor interestsRouteName username=routeUserName interest = (interestSlugName interest)}}"><i style="color:white !important" class="fitted star icon"></i>{{interest}}</a>
            {{/each}}
          </div>
        {{/if}}
      {{/each}}
    </div>

    <div class="ui stackable two column grid">
      <div class="ten wide column">
        <div class="ui padded segment">
          {{> Student_Explorer_Review_Widget event=item userReview=review completed=completed reviewType = 'course'}}
        </div>
      </div>

      <div class="six wide column">
        {{#each socialPair in socialPairs}}
          <div class="ui padded segment">
            <div class="ui dividing header">
              <h4>IN DEGREE PLAN {{> Widget_Header_Number inputValue = socialPair.amount}}</h4>
            </div>

            <div class="ui circular mini bordered images" style="overflow: visible;">
              {{#each user in socialPair.value}}
                <a href="{{pathFor usersRouteName username=routeUserName explorerUserName=(userUsername user)}}" data-position="bottom left" data-tooltip="{{fullName user}}"><img style="height:30px; width: auto;" class="ui image" src={{userPicture user}}></a>
              {{/each}}
            </div>
          </div>
        {{/each}}
      </div>
    </div>

  {{else}}
    {{> Loading}}
  {{/if}}
</template>
